(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,a){e.exports=a(292)},132:function(e,t,a){},133:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(18),o=a.n(i),l=(a(132),a(19)),s=a(20),c=a(24),u=a(23),p=a(25),h=(a(133),a(56)),m=a.n(h),g=a(57),d=a.n(g),f=a(26),v=a.n(f),y=function(){return n.a.createElement("div",null,n.a.createElement(m.a,{position:"static"},n.a.createElement(d.a,null,n.a.createElement(v.a,{variant:"title",color:"inherit"},"OpenSky Flight Tracker"))))},b=a(48),E=a(112),k=a.n(E),O=a(47),w=a.n(O),S=a(74),A=a.n(S),j=a(58),C=a.n(j),F=a(114),D=a.n(F),R=a(42),L=a.n(R),x=a(59),U=a.n(x),I=a(113),N=a.n(I),P=a(32),B=a.n(P),_=a(5),q=a.n(_),M=a(115),T=a.n(M),W=a(28),H={username:"demo",pasword:"demo"},X=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={email:"",password:"",wrongCred:!1},a.handleChange=function(e){var t=e.target.name,r=e.target.value;a.setState(Object(b.a)({},t,r))},a.handleSubmit=function(e){if(e.preventDefault(),a.state.email,a.state.password,a.state.email,H.username,a.state.password===H.pasword)return a.setState({wrongCred:!1}),a.props.history.push("/home");a.setState({wrongCred:!0})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,null),n.a.createElement("main",{className:e.main},n.a.createElement(A.a,null),n.a.createElement(B.a,{className:e.paper},n.a.createElement(k.a,{className:e.avatar},n.a.createElement(N.a,null)),n.a.createElement(v.a,{component:"h1",variant:"h5"},"Sign in"),n.a.createElement("form",{className:e.form},n.a.createElement(C.a,{margin:"normal",required:!0,fullWidth:!0},n.a.createElement(U.a,{htmlFor:"email"},"Email Address"),n.a.createElement(L.a,{id:"email",name:"email",autoComplete:"email",onChange:this.handleChange,autoFocus:!0})),n.a.createElement(C.a,{margin:"normal",required:!0,fullWidth:!0},n.a.createElement(U.a,{htmlFor:"password"},"Password"),n.a.createElement(L.a,{name:"password",type:"password",id:"password",onChange:this.handleChange,autoComplete:"current-password"})),n.a.createElement(D.a,{control:n.a.createElement(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),n.a.createElement(v.a,{component:"p",variant:"subtitle1",style:{color:"red"}},this.state.wrongCred?"Please enter correct username and password":""),n.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onSubmit:this.submitForm,onClick:this.handleSubmit,className:e.submit},"Sign in")))))}}]),t}(r.Component),J=Object(W.e)(q()(function(e){return{main:Object(b.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(X)),z=a(31),$=a(33),G=a.n($),K=a(121),Q=a.n(K),V=a(124),Y=a.n(V),Z=a(123),ee=a.n(Z),te=a(122),ae=a.n(te),re=a(73),ne=a.n(re),ie=a(41),oe=a(77),le=a.n(oe),se=a(118),ce=a.n(se),ue=a(117),pe=a.n(ue),he=a(34),me=a.n(he),ge=a(119),de=a.n(ge),fe=a(76),ve=a.n(fe);var ye=Object(ie.withStyles)({root:{width:"100%",overflowX:"auto"},table:{}})(function(e){var t,a=e.classes;return e.data&&(t=e.data.map(function(e,t){return n.a.createElement(pe.a,{key:"tablebody"+t},n.a.createElement(ve.a,{key:"tablerow"+t},n.a.createElement(me.a,{key:"flightcode",align:"right"},e.icao24),n.a.createElement(me.a,{component:"th",scope:"row",key:"arrivalairport"},e.estArrivalAirport),n.a.createElement(me.a,{key:"depairport",align:"right"},e.estDepartureAirport)))})),n.a.createElement(B.a,{className:a.root},n.a.createElement(ce.a,{className:a.table},n.a.createElement(de.a,null,n.a.createElement(ve.a,null,n.a.createElement(me.a,{key:"flightcode",align:"right"},"Flight Code"),n.a.createElement(me.a,{key:"arrival"},"Arrival Airport"),n.a.createElement(me.a,{key:"departure",align:"right"},"Departure Airport"))),console.log(e.data),t))}),be=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getAllFlights",value:function(e,t){var a=Math.floor(Date.now()/1e3)-172800,r=a+3600;return fetch(this.getAllFlightsURL(a,r)).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}},{key:"getArrivalOrDepartureFlights",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Math.floor(Date.now()/1e3)-172800,n=r+60*e,i=a?this.getArrivalFlightsURL(t,r,n):this.getDepartureFlightsURL(t,r,n);return console.log(i),fetch(i).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}},{key:"getBusiestAirportDetails",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!e)throw"FLights Undefined";var a=this.getBusiestAirportIcaoCodes(e,t);return this.fetchAirportDetailsFromIcaoCodes(a)}},{key:"getBusiestAirportIcaoCodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=this.getAllFlightsAtAirport(e);return Object.keys(a).sort(function(e,t){return a[t]-a[e]}).slice(0,t)}},{key:"getAllFlightsAtAirport",value:function(e){var t={};return console.log(e),e.forEach(function(e){var a=e.estDepartureAirport,r=e.estArrivalAirport;a&&(t[a]=(t[a]||0)+1),r&&(t[r]=(t[r]||0)+1)}),t}},{key:"fetchAirportDetailsFromIcaoCodes",value:function(e){var t=this,a=e.map(function(e){return console.log(t.getAirportURL(e)),fetch(t.getAirportURL(e))});return Promise.all(a).then(function(e){return Promise.all(e.map(function(e){return e.json()}))})}}]),t}(function(){function e(){Object(l.a)(this,e),this._openSkyRootURL="https://opensky-network.org/api"}return Object(s.a)(e,[{key:"getOpenSkyRootURL",value:function(){return this._openSkyRootURL}},{key:"getAllFlightsURL",value:function(e,t){var a="/flights/all?"+this._queryParams({begin:e,end:t});return"".concat(this.getOpenSkyRootURL()+a)}},{key:"getArrivalFlightsURL",value:function(e,t,a){var r="/flights/arrival?"+this._queryParams({airport:e,begin:t,end:a});return"".concat(this.getOpenSkyRootURL()+r)}},{key:"getDepartureFlightsURL",value:function(e,t,a){var r="/flights/departure?"+this._queryParams({airport:e,begin:t,end:a});return"".concat(this.getOpenSkyRootURL()+r)}},{key:"getAirportURL",value:function(e){var t="/airports?"+this._queryParams({icao:e});return"".concat(this.getOpenSkyRootURL()+t)}},{key:"_queryParams",value:function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")}}]),e}()),Ee=a(120),ke=a.n(Ee);var Oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).createData=function(e,t,a,r,n){return{name:e,calories:t,fat:a,carbs:r,protein:n}},a.state={open:!1,arrivalSearchString:60,arrivalFlights:null,departureSearchString:60,departureFlights:null},a.getArrivalDepartureflights=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new be;console.log("getflightscalled"),e&&r.getArrivalOrDepartureFlights(a.state.arrivalSearchString,a.props.airport.icao).then(function(e){console.log(e),console.log("getflights",a.props.airport.icao),a.setState({arrivalFlights:e.slice(0,10)}),a.setState({open:!0}),a.props.loader(!1)}),t&&r.getArrivalOrDepartureFlights(a.state.departureSearchString,a.props.airport.icao,!1).then(function(e){console.log(e),console.log("getflights",a.props.airport.icao),a.setState({departureFlights:e.slice(0,10)}),a.setState({open:!0}),a.props.loader(!1)})},a.onSearchInputChange=function(e){console.log("debounce"),e.target.value&&("searchArrivalInput"===e.currentTarget.id?(a.setState({arrivalSearchString:e.target.value}),a.getArrivalDepartureflights(!0,!1)):(a.setState({departureSearchString:e.target.value}),a.getArrivalDepartureflights(!1,!0)),console.log(ke.a))},a.handleOpen=function(){a.getArrivalDepartureflights(!0,!0),a.props.loader(!0)},a.handleClose=function(){a.setState({open:!1})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",null,this.props.airport?n.a.createElement(Q.a,null,n.a.createElement(ae.a,{style:{height:0,paddingTop:"56.25%"},image:"http://lorempixel.com/400/200/city/"+Math.floor(10*Math.random(0,1)),title:this.props.airport}),n.a.createElement(ee.a,null,n.a.createElement(v.a,{gutterBottom:!0,variant:"headline",component:"h2"},this.props.airport.name),n.a.createElement(v.a,{component:"p"},this.props.airport.municipality,", ",this.props.airport.region.split("-")[1],", ",this.props.airport.country)),n.a.createElement(Y.a,null,n.a.createElement(w.a,{size:"small",color:"primary",href:this.props.airport.fields,onClick:this.handleOpen,target:"_blank"},"Airport Details"),n.a.createElement(ne.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},n.a.createElement("div",{style:{top:"".concat(50,"%"),left:"50%",transform:"translate(-50%,-50%)"},className:e.paper},n.a.createElement(m.a,null,n.a.createElement(d.a,null,n.a.createElement(v.a,Object(b.a)({variant:"h6",id:"modal-title",color:"inherit"},"variant","title"),"ICAO number: ",this.props.airport.icao))),n.a.createElement(G.a,{container:!0,spacing:24,style:{padding:24}},n.a.createElement(G.a,{item:!0,xs:12,sm:6,lg:6,xl:6},n.a.createElement(le.a,{style:{padding:24},id:"searchArrivalInput",placeholder:"Arrival in last X mins",margin:"normal",onChange:this.onSearchInputChange}),console.log(this.state.data),n.a.createElement(ye,{data:this.state.arrivalFlights})),n.a.createElement(G.a,{item:!0,xs:12,sm:6,lg:6,xl:6},n.a.createElement(le.a,{style:{padding:24},id:"searchDepartureInput",placeholder:"Departure in last X mins",margin:"normal",onChange:this.onSearchInputChange}),n.a.createElement(ye,{data:this.state.departureFlights}))),n.a.createElement(we,null))))):null)}}]),t}(n.a.Component),we=Object(ie.withStyles)(function(e){return{paper:{position:"absolute",width:"80%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none"}}})(Oe),Se=we,Ae=a(125),je=a.n(Ae),Ce=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={flights:null,airports:null,searchString:"",loaderState:!1},e.getairports=function(){var t=new be;t.getAllFlights().then(function(a){t.getBusiestAirportDetails(a,10).then(function(t){e.setState({airports:t})})})},e.loadingHandler=e.loadingHandler.bind(Object(z.a)(Object(z.a)(e))),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getairports()}},{key:"loadingHandler",value:function(e){this.setState({loaderState:e})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,this.state.airports?n.a.createElement("div",null,n.a.createElement("div",{style:{display:this.state.loaderState?"flex":"none",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",position:"absolute",top:0,left:0,backgroundColor:"#000",opacity:.5}},n.a.createElement(je.a,{disableShrink:!0})),n.a.createElement("h1",{margin:"normal",style:{padding:34}}," 10 Busiest Airports ",n.a.createElement("i",{className:"fa fa-plane"})," "),n.a.createElement(G.a,{container:!0,spacing:24,style:{padding:24}},this.state.airports.map(function(t,a){return n.a.createElement(G.a,{key:a,item:!0,xs:12,sm:4,lg:3,xl:2},n.a.createElement(Se,{loader:e.loadingHandler,airport:t}))}))):"No airports found")}}]),t}(r.Component),Fe=a(126),De=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement(Fe.a,null,n.a.createElement("div",null,n.a.createElement(y,null),n.a.createElement(W.c,null,n.a.createElement(W.a,{exact:!0,path:"/",component:J}),n.a.createElement(W.a,{exact:!0,path:"/home",component:Ce}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[127,1,2]]]);
//# sourceMappingURL=main.1d3a6778.chunk.js.map